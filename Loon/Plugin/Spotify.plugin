# åŸé“¾æ¥ : https://github.com/DualSubs/Spotify/releases/latest/download/DualSubs.Spotify.plugin
#!name = ğŸ¿ï¸ DualSubs: ğŸµ Spotify
#!desc = Spotify å¢å¼ºåŠåŒè¯­æ­Œè¯
#Appé“¾æ¥=http://boxjs.com/#/app/DualSubs.Spotify
#!author = VirgilClyne[https://github.com/Moli-X/Tool/blob/X/Loon/Readme.md]
#!homepage=https://github.com/Moli-X/Resource/raw/Master/Loon/Plugin/Spotify.plugin
#!icon = https://github.com/DualSubs/Spotify/raw/main/src/assets/icon_rounded.png
#!tag = ğŸ¿ï¸ DualSubs
#!system = iOS,iPadOS,macOS
#!date = 2024-12-10 08:54:16
#!version = 1.9.9
#!system_version = 15

[Argument]
Types = input,"Translate,External",tag=[æ­Œè¯] å¯ç”¨ç±»å‹ï¼ˆå¤šé€‰ï¼‰,desc=è¯·é€‰æ‹©è¦æ·»åŠ çš„æ­Œè¯é€‰é¡¹ï¼Œå¦‚æœä¸ºå¤šé€‰ï¼Œåˆ™ä¼šè‡ªåŠ¨å†³å®šæä¾›çš„æ­Œè¯ç±»å‹ã€‚
Languages[0] = select,"AUTO","ZH","ZH-HANS","ZH-HK","ZH-HANT","EN","ES","JA","KO","DE","FR","TR","KM",tag=[ç¿»è¯‘å™¨] ä¸»è¯­è¨€ï¼ˆæºè¯­è¨€ï¼‰,desc=ä»…å½“æºè¯­è¨€è¯†åˆ«ä¸å‡†ç¡®æ—¶æ›´æ”¹æ­¤é€‰é¡¹ã€‚
Languages[1] = select,"ZH","ZH-HANS","ZH-HK","ZH-HANT","EN","ES","JA","KO","DE","FR","TR","KM",tag=[ç¿»è¯‘å™¨] å‰¯è¯­è¨€ï¼ˆç›®æ ‡è¯­è¨€ï¼‰,desc=è¯·æŒ‡å®šç¿»è¯‘æ­Œè¯çš„ç›®æ ‡è¯­è¨€ã€‚
Vendor = select,"Google","Microsoft",tag=[ç¿»è¯‘å™¨] æœåŠ¡å•†API,desc=è¯·é€‰æ‹©ç¿»è¯‘å™¨æ‰€ä½¿ç”¨çš„æœåŠ¡å•†APIï¼Œæ›´å¤šç¿»è¯‘é€‰é¡¹è¯·ä½¿ç”¨BoxJsã€‚
LrcVendor = select,"NeteaseMusic","QQMusic","NeteaseMusicNodeJS",tag=[æ­Œè¯] æœåŠ¡å•†API,desc=è¯·é€‰æ‹©å¤–éƒ¨æºæ‰€ä½¿ç”¨çš„æœåŠ¡å•†APIã€‚
LogLevel = select,"WARN","OFF","ERROR","INFO","DEBUG","ALL",tag=[è°ƒè¯•] æ—¥å¿—ç­‰çº§,desc=é€‰æ‹©è„šæœ¬æ—¥å¿—çš„è¾“å‡ºç­‰çº§ï¼Œä½äºæ‰€é€‰ç­‰çº§çš„æ—¥å¿—å°†å…¨éƒ¨è¾“å‡ºã€‚

[Script]
http-response ^https?:\/\/api\.spotify\.com\/v1\/tracks\? requires-body=1, script-path=https://github.com/DualSubs/Spotify/releases/download/v1.9.9/response.bundle.js, tag=ğŸ¿ï¸ DualSubs.Spotify.Tracks.response.json, argument=[{Types},{Languages[0]},{Languages[1]},{Vendor},{LrcVendor},{LogLevel}]

http-request ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json requires-body=1, script-path=https://github.com/DualSubs/Spotify/releases/download/v1.9.9/request.bundle.js, tag=ğŸ¿ï¸ DualSubs.Spotify.Lyrics.request.json, argument=[{Types},{Languages[0]},{Languages[1]},{Vendor},{LrcVendor},{LogLevel}]
http-request ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*) requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/Spotify/releases/download/v1.9.9/request.bundle.js, tag=ğŸ¿ï¸ DualSubs.Spotify.Lyrics.request.proto, argument=[{Types},{Languages[0]},{Languages[1]},{Vendor},{LrcVendor},{LogLevel}]

http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=Translate requires-body=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js, tag=ğŸ¿ï¸ DualSubs.Spotify.Translate.Lyrics.response.json, argument=[{Types},{Languages[0]},{Languages[1]},{Vendor},{LrcVendor},{LogLevel}]
http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=Translate requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js, tag=ğŸ¿ï¸ DualSubs.Spotify.Translate.Lyrics.response.proto, argument=[{Types},{Languages[0]},{Languages[1]},{Vendor},{LrcVendor},{LogLevel}]

http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/(.+)\?(.*)format=json(.*)subtype=External requires-body=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/External.Lyrics.response.bundle.js, tag=ğŸ¿ï¸ DualSubs.Spotify.External.Lyrics.response.json, argument=[{Types},{Languages[0]},{Languages[1]},{Vendor},{LrcVendor},{LogLevel}]
http-response ^https?:\/\/spclient\.wg\.spotify\.com\/color-lyrics\/v2\/track\/\w+\?(.*)subtype=External requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/External.Lyrics.response.bundle.js, tag=ğŸ¿ï¸ DualSubs.Spotify.External.Lyrics.response.proto, argument=[{Types},{Languages[0]},{Languages[1]},{Vendor},{LrcVendor},{LogLevel}]

[MITM]
hostname = api.spotify.com, spclient.wg.spotify.com
