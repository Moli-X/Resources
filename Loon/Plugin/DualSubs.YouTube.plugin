# åŸé“¾æ¥ : https://github.com/DualSubs/YouTube/releases/latest/download/DualSubs.YouTube.plugin
#!name = ğŸ¿ï¸ DualSubs: â–¶ï¸ YouTube
#!desc = YouTube å¢å¼ºåŠåŒè¯­å­—å¹•(æ­Œè¯)
#Appé“¾æ¥=http://boxjs.com/#/app/DualSubs.YouTube
#!author = VirgilClyne[https://github.com/Moli-X/Tool/blob/X/Loon/Readme.md]
#!homepage=https://github.com/Moli-X/Tool/raw/X/Loon/Plugin/DualSubs.YouTube.plugin
#!icon = https://github.com/DualSubs/YouTube/raw/main/src/assets/icon_rounded.png
#!tag = ğŸ¿ï¸ DualSubs
#!system = iOS,iPadOS,macOS
#!date = 2024-12-11 01:41:21
#!version = 1.5.11
#!system_version = 15

[Argument]
Type = select,"Official","Translate",tag=[å­—å¹•] å¯ç”¨ç±»å‹,desc=è¯·é€‰æ‹©è¦ä½¿ç”¨çš„å­—å¹•ï¼ŒåŒè¯­å­—å¹•å°†ä½¿ç”¨æ‚¨é€‰æ‹©ç±»å‹å‘ˆç°ã€‚
Types = input,"Translate",tag=[æ­Œè¯] å¯ç”¨ç±»å‹,desc=è¯·é€‰æ‹©è¦æ·»åŠ çš„æ­Œè¯é€‰é¡¹ï¼Œå¦‚æœä¸ºå¤šé€‰ï¼Œåˆ™ä¼šè‡ªåŠ¨å†³å®šæä¾›çš„æ­Œè¯ç±»å‹ã€‚
AutoCC = switch,true,tag=[å­—å¹•] è‡ªåŠ¨æ˜¾ç¤º,desc=æ˜¯å¦æ€»æ˜¯è‡ªåŠ¨å¼€å¯å­—å¹•æ˜¾ç¤ºã€‚
Position = select,"Forward","Reverse",tag=[å­—å¹•] ä¸»è¯­è¨€ï¼ˆæºè¯­è¨€ï¼‰å­—å¹•ä½ç½®,desc=ä¸»è¯­è¨€ï¼ˆæºè¯­è¨€ï¼‰å­—å¹•çš„æ˜¾ç¤ºä½ç½®ã€‚
Vendor = select,"Google","Microsoft",tag=[ç¿»è¯‘å™¨] æœåŠ¡å•†API,desc=è¯·é€‰æ‹©ç¿»è¯‘å™¨æ‰€ä½¿ç”¨çš„æœåŠ¡å•†APIï¼Œæ›´å¤šç¿»è¯‘é€‰é¡¹è¯·ä½¿ç”¨BoxJsã€‚
ShowOnly = switch,false,tag=[ç¿»è¯‘å™¨] åªæ˜¾ç¤ºâ€œè‡ªåŠ¨ç¿»è¯‘â€å­—å¹•,desc=æ˜¯å¦ä»…æ˜¾ç¤ºâ€œè‡ªåŠ¨ç¿»è¯‘â€å­—å¹•ï¼Œä¸æ˜¾ç¤ºæºè¯­è¨€å­—å¹•ã€‚
LogLevel = select,"WARN","OFF","ERROR","INFO","DEBUG","ALL",tag=[è°ƒè¯•] æ—¥å¿—ç­‰çº§,desc=é€‰æ‹©è„šæœ¬æ—¥å¿—çš„è¾“å‡ºç­‰çº§ï¼Œä½äºæ‰€é€‰ç­‰çº§çš„æ—¥å¿—å°†å…¨éƒ¨è¾“å‡ºã€‚

[Rewrite]
# ä½¿ç”¨reject-imgå‡å°‘å¼€é”€
^https?:\/\/([\w-]+)\.googlevideo\.com\/initplayback(\?.*oad=.+)$ reject-img

[Script]
# YouTube
http-request ^https?:\/\/(www|m|tv)\.youtube\.com\/youtubei\/v1\/player(\?.+)?$ requires-body=1, script-path=https://github.com/DualSubs/YouTube/releases/download/v1.5.11/request.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.Player.request.json, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-response ^https?:\/\/(www|m|tv)\.youtube\.com\/youtubei\/v1\/player(\?.+)?$ requires-body=1, script-path=https://github.com/DualSubs/YouTube/releases/download/v1.5.11/response.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.Player.response.json, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-request ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/player(\?.+)?$ requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/YouTube/releases/download/v1.5.11/request.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.Player.request.proto, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-response ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/player(\?.+)?$ requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/YouTube/releases/download/v1.5.11/response.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.Player.response.proto, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-response ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/get_watch(\?.+)?$ requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/YouTube/releases/download/v1.5.11/response.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.GetWatch.response.proto, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-request ^https?:\/\/(www|m)\.youtube\.com\/api\/timedtext(\?.+)?$ script-path=https://github.com/DualSubs/YouTube/releases/download/v1.5.11/request.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.TimedText.request, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-response ^https?:\/\/(www|m)\.youtube\.com\/api\/timedtext\?(.*)subtype=(Official|External) requires-body=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/Composite.Subtitles.response.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.Composite.TimedText.response, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-response ^https?:\/\/(www|m)\.youtube\.com\/api\/timedtext\?(.*)subtype=Translate requires-body=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.Translate.TimedText.response, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]

# YouTube Music
http-request ^https?:\/\/music\.youtube\.com\/youtubei\/v1\/browse(\?.+)?$ requires-body=1, script-path=https://github.com/DualSubs/YouTube/releases/download/v1.5.11/request.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTubeMusic.Browse.request.json, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-request ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/browse(\?.+)?$ requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/YouTube/releases/download/v1.5.11/request.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTube.Browse.request.proto, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-response ^https?:\/\/music\.youtube\.com\/youtubei\/v1\/browse\?(.*)subtype=Translate requires-body=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTubeMusic.Translate.Lyrics.response.json, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]
http-response ^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/browse\?(.*)subtype=Translate requires-body=1, binary-body-mode=1, script-path=https://github.com/DualSubs/Universal/releases/latest/download/Translate.response.bundle.js, tag=ğŸ¿ï¸ DualSubs.YouTubeMusic.Translate.Lyrics.response.proto, argument=[{Type},{Types},{AutoCC},{Position},{Vendor},{ShowOnly},{LogLevel}]

[MITM]
hostname = www.youtube.com, m.youtube.com, tv.youtube.com, music.youtube.com, youtubei.googleapis.com, -redirector*.googlevideo.com, *.googlevideo.com
